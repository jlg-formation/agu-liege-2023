<main>
  <h1>Ajouter un article</h1>
  <form [formGroup]="f" (ngSubmit)="submit()">
    <label>
      <span>Nom*</span>
      <input type="text" formControlName="name" appAutofocus />
      <span class="error">
        <span *ngIf="f.controls.name.errors?.['required']">
          Le champ est obligatoire
        </span>
        <span *ngIf="f.controls.name.errors?.['minlength']">
          Entrer au moins
          {{ f.controls.name.errors?.['minlength'].requiredLength }} caractères
        </span>
      </span>
    </label>
    <label>
      <span>Prix*</span>
      <input type="number" formControlName="price" />
      <span class="error">
        <span *ngIf="f.controls.price.errors?.['required']">
          Le champ est obligatoire
        </span>
      </span>
    </label>
    <label>
      <span>Quantité*</span>
      <input type="number" formControlName="qty" />
      <span class="error">
        <span *ngIf="f.controls.qty.errors?.['required']">
          Le champ est obligatoire
        </span>
      </span>
    </label>
    <div class="error">
      {{ errorMsg }}
    </div>
    <button
      type="submit"
      class="primary"
      [disabled]="f.invalid || isSubmitting"
    >
      <fa-icon
        [icon]="isSubmitting ? faCircleNotch : faPlus"
        [spin]="isSubmitting"
      ></fa-icon>
      <span>Ajouter</span>
    </button>
  </form>
  <!-- {{ f.controls.name.errors | json }} -->
</main>
